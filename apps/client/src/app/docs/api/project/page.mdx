# 프로젝트 데이터 OpenAPI

### 개요

프로젝트 데이터 OpenAPI는 동아리에서 진행하는 프로젝트 데이터를 간단한 HTTP 요청을 통하여 서비스에 통합할 수 있도록 돕습니다. 해당 REST API를 호출하여 기본적인 프로젝트 데이터를 획득하고, 프로젝트 생성, 수정, 삭제 등의 관리 작업을 수행할 수 있습니다.

### 인증

모든 API 요청은 HTTP 헤더에 API 키를 포함해야 합니다.

```http
X-API-KEY: your-api-key-here
```

API 키는 UUID 형식이며, 만료되거나 유효하지 않은 키를 사용할 경우 `401 Unauthorized` 응답을 받게 됩니다.

## 프로젝트 조회 API

### 엔드포인트

```http
GET /v1/projects
```

### 권한 범위

`PROJECT_READ` 권한이 필요합니다.

### 요청 파라미터

| 파라미터      | 타입     | 필수 여부 | 설명                      | 예시               |
| ------------- | -------- | --------- | ------------------------- | ------------------ |
| `projectId`   | `Long`   | 선택      | 프로젝트 ID               | `1`                |
| `projectName` | `String` | 선택      | 프로젝트 이름             | `DataGSM 프로젝트` |
| `clubId`      | `Long`   | 선택      | 동아리 ID                 | `1`                |
| `page`        | `Int`    | 선택      | 페이지 번호 (기본값: 0)   | `0`                |
| `size`        | `Int`    | 선택      | 페이지 크기 (기본값: 100) | `100`              |

### 응답 형식

응답은 프로젝트 정보 목록을 포함하며, 각 프로젝트 객체는 다음 필드를 포함합니다.

| 필드            | 타입               | 설명             | 예시 |
| --------------- | ------------------ | ---------------- | ---- |
| `totalPages`    | `Int`              | 전체 페이지 수   | `1`  |
| `totalElements` | `Long`             | 전체 프로젝트 수 | `20` |
| `projects`      | `List<ProjectDto>` | 프로젝트 목록    | -    |

### 프로젝트 객체 (ProjectDto)

각 프로젝트 객체는 다음 필드를 포함합니다.

| 필드           | 타입                       | 설명                      | 예시                                |
| -------------- | -------------------------- | ------------------------- | ----------------------------------- |
| `id`           | `Long`                     | 프로젝트 ID               | `1`                                 |
| `name`         | `String`                   | 프로젝트 이름             | `DataGSM 프로젝트`                  |
| `description`  | `String`                   | 프로젝트 설명             | `학교 데이터를 제공하는 API 서비스` |
| `club`         | `ClubSummaryDto`           | 프로젝트 소유 동아리 정보 | -                                   |
| `participants` | `List<ParticipantInfoDto>` | 프로젝트 참가자 목록      | -                                   |

### 동아리 요약 객체 (ClubSummaryDto)

프로젝트 응답에 포함된 동아리 정보는 다음 필드를 포함합니다.

| 필드   | 타입       | 설명                                                      | 예시           |
| ------ | ---------- | --------------------------------------------------------- | -------------- |
| `id`   | `Long`     | 동아리 ID                                                 | `1`            |
| `name` | `String`   | 동아리 이름                                               | `SW개발동아리` |
| `type` | `ClubType` | 동아리 종류 (`MAJOR_CLUB`, `JOB_CLUB`, `AUTONOMOUS_CLUB`) | `MAJOR_CLUB`   |

### 참가자 정보 객체 (ParticipantInfoDto)

프로젝트 응답에 포함된 참가자 정보는 다음 필드를 포함합니다.

| 필드            | 타입     | 설명                                       | 예시               |
| --------------- | -------- | ------------------------------------------ | ------------------ |
| `id`            | `Long`   | 학생 ID                                    | `1`                |
| `name`          | `String` | 학생 이름                                  | `홍길동`           |
| `email`         | `String` | 학생 이메일                                | `s24080@gsm.hs.kr` |
| `studentNumber` | `Int`    | 학번                                       | `1201`             |
| `major`         | `Major`  | 학과 (`SW_DEVELOPMENT`, `SMART_IOT`, `AI`) | `SW_DEVELOPMENT`   |
| `sex`           | `Sex`    | 성별 (`MAN`, `WOMAN`)                      | `MAN`              |

**동아리 종류 (ClubType)**

- `MAJOR_CLUB`: 전공동아리
- `JOB_CLUB`: 취업동아리
- `AUTONOMOUS_CLUB`: 창체동아리

### 요청 예시

```bash
curl -X GET "https://api.datagsm.com/v1/projects?clubId=1&page=0&size=50" \
  -H "X-API-KEY: your-api-key-here"
```

### 응답 예시

```json
{
  "totalPages": 1,
  "totalElements": 2,
  "projects": [
    {
      "id": 1,
      "name": "DataGSM 프로젝트",
      "description": "학교 데이터를 제공하는 API 서비스",
      "club": {
        "id": 1,
        "name": "SW개발동아리",
        "type": "MAJOR_CLUB"
      },
      "participants": [
        {
          "id": 1,
          "name": "홍길동",
          "email": "s24080@gsm.hs.kr",
          "studentNumber": 1201,
          "major": "SW_DEVELOPMENT",
          "sex": "MAN"
        },
        {
          "id": 2,
          "name": "김철수",
          "email": "s24081@gsm.hs.kr",
          "studentNumber": 1202,
          "major": "SMART_IOT",
          "sex": "MAN"
        }
      ]
    }
  ]
}
```

---

## 프로젝트 생성 API

### 엔드포인트

```http
POST /v1/projects
```

### 권한 범위

`PROJECT_WRITE` 권한이 필요합니다.

### 요청 본문

| 필드             | 타입         | 필수 여부 | 설명                         | 제약사항              |
| ---------------- | ------------ | --------- | ---------------------------- | --------------------- |
| `name`           | `String`     | 필수      | 프로젝트 이름                | 최대 100자, 공백 불가 |
| `description`    | `String`     | 필수      | 프로젝트 설명                | 최대 500자, 공백 불가 |
| `clubId`         | `Long`       | 필수      | 프로젝트 소유 동아리 ID      | -                     |
| `participantIds` | `List<Long>` | 선택      | 프로젝트 참가자 학생 ID 목록 | 기본값: 빈 배열       |

### 요청 예시

```bash
curl -X POST "https://api.datagsm.com/v1/projects" \
  -H "X-API-KEY: your-api-key-here" \
  -H "Content-Type: application/json" \
  -d '{
    "name": "DataGSM 프로젝트",
    "description": "학교 데이터를 제공하는 API 서비스",
    "clubId": 1,
    "participantIds": [1, 2, 3]
  }'
```

### 응답 예시

```json
{
  "id": 1,
  "name": "DataGSM 프로젝트",
  "description": "학교 데이터를 제공하는 API 서비스",
  "club": {
    "id": 1,
    "name": "SW개발동아리",
    "type": "MAJOR_CLUB"
  },
  "participants": [
    {
      "id": 1,
      "name": "홍길동",
      "email": "s24080@gsm.hs.kr",
      "studentNumber": 1201,
      "major": "SW_DEVELOPMENT",
      "sex": "MAN"
    }
  ]
}
```

### 오류 응답

| 상태 코드         | 설명                            |
| ----------------- | ------------------------------- |
| `400 Bad Request` | 잘못된 요청 (검증 실패)         |
| `404 Not Found`   | 동아리 또는 학생을 찾을 수 없음 |
| `409 Conflict`    | 이미 존재하는 프로젝트 이름     |

---

## 프로젝트 수정 API

### 엔드포인트

```http
PUT /v1/projects/{projectId}
```

### 권한 범위

`PROJECT_WRITE` 권한이 필요합니다.

### 경로 파라미터

| 파라미터    | 타입   | 필수 여부 | 설명        |
| ----------- | ------ | --------- | ----------- |
| `projectId` | `Long` | 필수      | 프로젝트 ID |

### 요청 본문

| 필드             | 타입         | 필수 여부 | 설명                         | 제약사항              |
| ---------------- | ------------ | --------- | ---------------------------- | --------------------- |
| `name`           | `String`     | 필수      | 프로젝트 이름                | 최대 100자, 공백 불가 |
| `description`    | `String`     | 필수      | 프로젝트 설명                | 최대 500자, 공백 불가 |
| `clubId`         | `Long`       | 필수      | 프로젝트 소유 동아리 ID      | -                     |
| `participantIds` | `List<Long>` | 선택      | 프로젝트 참가자 학생 ID 목록 | 기본값: 빈 배열       |

### 요청 예시

```bash
curl -X PUT "https://api.datagsm.com/v1/projects/1" \
  -H "X-API-KEY: your-api-key-here" \
  -H "Content-Type: application/json" \
  -d '{
    "name": "DataGSM 프로젝트 v2",
    "description": "학교 데이터를 제공하는 API 서비스 (업데이트)",
    "clubId": 1,
    "participantIds": [1, 2, 3, 4]
  }'
```

### 응답 예시

```json
{
  "id": 1,
  "name": "DataGSM 프로젝트 v2",
  "description": "학교 데이터를 제공하는 API 서비스 (업데이트)",
  "club": {
    "id": 1,
    "name": "SW개발동아리",
    "type": "MAJOR_CLUB"
  },
  "participants": [
    {
      "id": 1,
      "name": "홍길동",
      "email": "s24080@gsm.hs.kr",
      "studentNumber": 1201,
      "major": "SW_DEVELOPMENT",
      "sex": "MAN"
    },
    {
      "id": 2,
      "name": "김철수",
      "email": "s24081@gsm.hs.kr",
      "studentNumber": 1202,
      "major": "SMART_IOT",
      "sex": "MAN"
    }
  ]
}
```

### 오류 응답

| 상태 코드         | 설명                                      |
| ----------------- | ----------------------------------------- |
| `400 Bad Request` | 잘못된 요청 (검증 실패)                   |
| `404 Not Found`   | 프로젝트, 동아리 또는 학생을 찾을 수 없음 |
| `409 Conflict`    | 이미 존재하는 프로젝트 이름               |

---

## 프로젝트 삭제 API

### 엔드포인트

```http
DELETE /v1/projects/{projectId}
```

### 권한 범위

`PROJECT_WRITE` 권한이 필요합니다.

### 경로 파라미터

| 파라미터    | 타입   | 필수 여부 | 설명        |
| ----------- | ------ | --------- | ----------- |
| `projectId` | `Long` | 필수      | 프로젝트 ID |

### 요청 예시

```bash
curl -X DELETE "https://api.datagsm.com/v1/projects/1" \
  -H "X-API-KEY: your-api-key-here"
```

### 응답 예시

**Status Code**: `200 OK`

응답 본문 없음

### 오류 응답

| 상태 코드       | 설명                    |
| --------------- | ----------------------- |
| `404 Not Found` | 프로젝트를 찾을 수 없음 |

---

## 공통 오류 응답

| 상태 코드               | 설명                              |
| ----------------------- | --------------------------------- |
| `401 Unauthorized`      | API 키가 유효하지 않거나 만료됨   |
| `403 Forbidden`         | 필요한 권한 범위가 없음           |
| `429 Too Many Requests` | 단위 시간에 너무 많은 요청량 발생 |

---

## 사용 예제

다음은 Node.js Express 환경에서 프로젝트 데이터를 조회하고 관리하는 예제입니다.

### 프로젝트 조회

```javascript
const express = require('express');
const app = express();
const axios = require('axios');

app.get('/projects/:id', async (req, res) => {
  try {
    const response = await axios.get(`https://api.datagsm.com/v1/projects`, {
      headers: {
        'X-API-KEY': 'your-api-key-here',
      },
      params: {
        projectId: req.params.id,
      },
    });
    res.json(response.data);
  } catch (error) {
    res.status(error.response?.status || 500).json({ message: error.message });
  }
});

app.listen(3000, () => {
  console.log('Server is running on port 3000');
});
```

### 프로젝트 생성

```javascript
app.post('/projects', async (req, res) => {
  try {
    const { name, description, clubId, participantIds } = req.body;
    const response = await axios.post(
      'https://api.datagsm.com/v1/projects',
      {
        name,
        description,
        clubId,
        participantIds,
      },
      {
        headers: {
          'X-API-KEY': 'your-api-key-here',
          'Content-Type': 'application/json',
        },
      },
    );
    res.json(response.data);
  } catch (error) {
    res.status(error.response?.status || 500).json({
      message: error.response?.data?.message || error.message,
    });
  }
});
```

### 프로젝트 수정

```javascript
app.put('/projects/:projectId', async (req, res) => {
  try {
    const { projectId } = req.params;
    const { name, description, clubId, participantIds } = req.body;
    const response = await axios.put(
      `https://api.datagsm.com/v1/projects/${projectId}`,
      {
        name,
        description,
        clubId,
        participantIds,
      },
      {
        headers: {
          'X-API-KEY': 'your-api-key-here',
          'Content-Type': 'application/json',
        },
      },
    );
    res.json(response.data);
  } catch (error) {
    res.status(error.response?.status || 500).json({
      message: error.response?.data?.message || error.message,
    });
  }
});
```

### 프로젝트 삭제

```javascript
app.delete('/projects/:projectId', async (req, res) => {
  try {
    const { projectId } = req.params;
    await axios.delete(`https://api.datagsm.com/v1/projects/${projectId}`, {
      headers: {
        'X-API-KEY': 'your-api-key-here',
      },
    });
    res.status(200).send();
  } catch (error) {
    res.status(error.response?.status || 500).json({
      message: error.response?.data?.message || error.message,
    });
  }
});
```

위 예제에서는 Express 서버를 설정하고, 프로젝트 데이터를 조회, 생성, 수정, 삭제하는 엔드포인트를 구현하였습니다. `axios`를 사용하여 OpenAPI에 요청을 보내고, 응답 데이터를 클라이언트에 반환합니다.
