# OAuth 구현 예제

### 개요

이 섹션에서는 다양한 프레임워크와 아키텍처 패턴을 사용한 실전 OAuth 구현 예제를 제공합니다.
각 예제는 완전히 동작하는 코드와 함께 프론트엔드와 백엔드 구현을 모두 포함합니다.

예제를 통해 프로젝트의 기술 스택과 요구사항에 맞는 OAuth 구현 방법을 선택할 수 있습니다.

### 사용 가능한 예제

| 예제 | 프론트엔드 | 백엔드 | 주요 특징 | 권장 사용 사례 |
| --- | --- | --- | --- | --- |
| [Next.js + Spring Boot](/docs/oauth/examples/nextjs-spring-boot) | Next.js | Spring Boot (Java) | 프론트에서 code까지, 서버에서 token 교환 및 JWT 발급 | 보안이 중요한 서비스, 엔터프라이즈 애플리케이션 |
| [React + Spring Boot (Kotlin)](/docs/oauth/examples/react-spring-boot-kotlin) | React | Spring Boot (Kotlin) | 프론트에서 token까지 교환, 서버에서 token 검증 | SPA 기반 애플리케이션, 모던 웹 서비스 |
| [Vanilla JS + NestJS](/docs/oauth/examples/vanilla-nestjs) | Vanilla JavaScript | NestJS (TypeScript) | OAuth code 인증 후 세션 기반 인증 | 프레임워크 없는 프로젝트, 세션 기반 인증 선호 |

### 시나리오별 선택 가이드

#### 시나리오 1: Next.js + Spring Boot

**언제 사용하나요?**
- 서버 측에서 완전한 OAuth 플로우 제어가 필요한 경우
- Client Secret을 완전히 보호해야 하는 경우
- 서버에서 자체 JWT를 발급하여 세션 관리를 하는 경우

**특징**:
- 프론트엔드는 Authorization Code만 획득
- 서버가 Token 교환 및 UserInfo 조회를 담당
- 가장 안전한 구현 방식

**플로우**:
```
사용자 → Next.js (code 획득) → Spring Boot (token 교환 + userinfo 조회 + JWT 발급) → 로그인 완료
```

#### 시나리오 2: React + Spring Boot (Kotlin)

**언제 사용하나요?**
- SPA(Single Page Application) 구조를 선호하는 경우
- 프론트엔드에서 OAuth 플로우를 직접 제어하고 싶은 경우
- 서버는 토큰 검증만 담당하면 되는 경우

**특징**:
- 프론트엔드가 Token 교환까지 수행
- 서버는 Access Token을 검증하고 자체 JWT 발급
- 프론트엔드 개발자의 자율성이 높음

**플로우**:
```
사용자 → React (code 획득 + token 교환) → Spring Boot (token 검증 + JWT 발급) → 로그인 완료
```

#### 시나리오 3: Vanilla JS + NestJS

**언제 사용하나요?**
- React/Vue 등의 프레임워크 없이 순수 JavaScript를 사용하는 경우
- 세션 기반 인증을 선호하는 경우
- JWT 대신 전통적인 서버 세션을 사용하는 경우

**특징**:
- 프레임워크 없는 순수 JavaScript 구현
- 서버 측 세션 스토어 활용
- 간단한 쿠키 기반 인증

**플로우**:
```
사용자 → Vanilla JS (code 획득) → NestJS (token 교환 + userinfo 조회 + 세션 생성) → 로그인 완료
```

### 공통 개념

모든 예제는 다음 공통 개념을 포함합니다.

#### Client ID & Client Secret

DataGSM에서 발급받은 인증 정보입니다.
- **Client ID**: 프론트엔드에서 사용 가능
- **Client Secret**: **반드시 서버에서만 사용** (절대 프론트엔드 노출 금지)

#### Authorization Code

사용자 인증 후 발급되는 일회성 코드입니다 (5분 유효).

#### Access Token & Refresh Token

- **Access Token**: 사용자 리소스 접근용 (1시간 유효)
- **Refresh Token**: Access Token 갱신용 (30일 유효)

#### 리다이렉트 URI

OAuth 인증 후 사용자가 돌아올 URI입니다. DataGSM에 사전 등록되어야 합니다.

### 보안 권장사항

모든 예제에서 공통으로 적용해야 할 보안 권장사항입니다.

#### 1. Client Secret 보호

```bash
# 환경 변수로 관리
DATAGSM_CLIENT_SECRET=your-client-secret

# .gitignore에 추가
.env
.env.local
```

#### 2. HTTPS 사용

프로덕션 환경에서는 반드시 HTTPS를 사용하세요.

#### 3. State 파라미터

CSRF 공격 방지를 위해 State 파라미터를 사용하세요.

#### 4. 토큰 저장

- Access Token: sessionStorage 또는 메모리
- Refresh Token: HttpOnly 쿠키 또는 서버 세션

### 예제 사용 방법

각 예제는 다음 구조로 제공됩니다.

1. **아키텍처 개요**: 전체 구조와 데이터 플로우
2. **프론트엔드 구현**: 완전한 코드와 설명
3. **백엔드 구현**: 완전한 코드와 설명
4. **환경 설정**: 필요한 환경 변수와 설정
5. **실행 방법**: 로컬 개발 환경 설정 가이드
6. **플로우 다이어그램**: 시각적 설명

### 다음 단계

프로젝트에 적합한 예제를 선택하여 구현을 시작하세요.

- [Next.js + Spring Boot 예제](/docs/oauth/examples/nextjs-spring-boot)
- [React + Spring Boot (Kotlin) 예제](/docs/oauth/examples/react-spring-boot-kotlin)
- [Vanilla JS + NestJS 예제](/docs/oauth/examples/vanilla-nestjs)

HTTP API 상세 문서가 필요하면 [HTTP API 문서](/docs/oauth/http)를 참고하세요.
